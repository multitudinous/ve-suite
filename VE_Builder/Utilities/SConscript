import os, sys, string
pj = os.path.join

Import('baseEnv')
Import('Platform')
Import( 'vtk' )
Import( 'boost' )

addNormals2Poly = Split("""
   addNormals2Poly.cpp
""")

appendVTK = Split("""
   appendVTK.cpp
""")

combineFluentParticleFile = Split("""
   CombinePartFiles.cpp
""")

compareScalars = Split("""
    compareScalars.cpp
""")

convertCellDataToPointData = Split("""
   convertCellDataToPointData.cpp
""")

convertSurfaceFileToStl = Split("""
   convertSurfaceFileToStl.cpp 
""")

convertVTK2Ascii = Split("""
   convertVTK2Ascii.cpp
""")

convertVTK2Binary = Split("""
   convertVTK2Binary.cpp
""")

createMiniFlowdata = Split("""
   createMiniFlowdata.cpp
""")

makeVtkSurface = Split("""
   makeVtkSurface.cpp
   setScalarAndVector.cpp
   ../Translator/viewCells.cpp""")

mergeVertices = Split("""
   mergeVertices.cpp
""")

meshViewer = Split("""
   meshViewer.cpp
   setScalarAndVector.cpp
   ../Translator/viewCells.cpp""")

moveFieldToPointData = Split("""
   moveFieldToPointData.cpp
""")

removeVtkCellsOutsideBox = Split("""
   removeVtkCellsOutsideBox.cpp
""")

removeVtkPointData = Split("""
   removeVtkPointData.cpp
""")

scaleVTK = Split("""
   scaleVTK.cpp
""")

transformVTK = Split("""
   transformVTK.cpp 
""")

whatIsScalarRange = Split("""
   whatIsScalarRange.cpp
""")

env = baseEnv.Copy()
env.Append(CPPPATH = [os.getcwd()])
env.Append(CPPPATH = ['#'])
env.Append(CPPPATH = pj( os.getenv('VTK_BASE_DIR',''), 'include', 'vtk') )
env.Append(CPPPATH = pj( os.getenv('VJ_DEPS_DIR',''), 'include') )
env.Append(LIBPATH = '#',
              LIBS = 'VE_UtilLib')

env.Append(CPPPATH = pj('#', 'VE_Builder', 'Translator'))


for lib in vtk:
   env.Append(LIBS = lib)
for lib in boost:
   env.Append(LIBS = lib)
env.ParseConfig( 'vpr-config --libs --extra-libs --includes' )
env.ParseConfig( 'vrjuggler-config --libs --extra-libs --includes' )

env.Program(pj('#','bin',Platform,'addNormals2Poly'), source = addNormals2Poly)
env.Program(pj('#','bin',Platform,'appendVTK'), source = appendVTK)
env.Program(pj('#','bin',Platform,'combineFluentParticleFile'), source = combineFluentParticleFile)
env.Program(pj('#','bin',Platform,'compareScalars'), source = compareScalars)
env.Program(pj('#','bin',Platform,'convertCellDataToPointData'), source = convertCellDataToPointData)
env.Program(pj('#','bin',Platform,'convertSurfaceFileToStl'), source = convertSurfaceFileToStl)
env.Program(pj('#','bin',Platform,'convertVTK2Ascii'), source = convertVTK2Ascii)
env.Program(pj('#','bin',Platform,'convertVTK2Binary'), source = convertVTK2Binary)
#env.Program(pj('#','bin',Platform,'createMiniFlowdata'), source = createMiniFlowdata)
env.Program(pj('#','bin',Platform,'makeVtkSurface'), source = makeVtkSurface)
env.Program(pj('#','bin',Platform,'mergeVertices'), source = mergeVertices)
env.Program(pj('#','bin',Platform,'meshViewer'), source = meshViewer)
env.Program(pj('#','bin',Platform,'moveFieldToPointData'), source = moveFieldToPointData)
env.Program(pj('#','bin',Platform,'removeVtkCellsOutsideBox'), source = removeVtkCellsOutsideBox)
env.Program(pj('#','bin',Platform,'removeVtkPointData'), source = removeVtkPointData)
env.Program(pj('#','bin',Platform,'scaleVTK'), source = scaleVTK)
env.Program(pj('#','bin',Platform,'transformVTK'), source = transformVTK)
env.Program(pj('#','bin',Platform,'whatIsScalarRange'), source = whatIsScalarRange)
