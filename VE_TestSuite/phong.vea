<?xml version="1.0" encoding="ISO-8859-1" standalone="no" ?>

<Program>
<name>phong</name>

<vertexShader>
<type>Vertex</type>
	<shaderCode>
		varying vec3 lightPos;
		varying vec3 objPos;
      	varying vec3 eyePos;
      	varying vec3 normal;
   
      	void main()
      	{
            	gl_Position=ftransform();
            
            	objPos=gl_Vertex.xyz;
            	eyePos=vec3(gl_ModelViewMatrix*gl_Vertex);
            	lightPos=gl_LightSource[0].position.xyz;
            	normal=gl_NormalMatrix*gl_Normal;
      	}
	</shaderCode>
</vertexShader>

<fragmentShader>
<type>Fragment</type>
	<uniform>
		<name>fSpecularPower</name>
		<type>Float</type>
		<size>1</size>
		<value>25.0</value>
	</uniform>
	<shaderCode>
		uniform float specularPower;

		varying vec3 lightPos;
		varying vec3 objPos;
		varying vec3 eyePos;
		varying vec3 normal;

		void main()
		{
   			vec3 L=normalize(lightPos);
   			vec3 N=normalize(normal);
   			float NDotL=max(0.0,dot(N,L)); 
   
   			vec3 V=normalize(eyePos);
   			vec3 R=reflect(V,N);
   			float RDotL=max(0.0,dot(R,L));
   
  			vec3 TotalAmbient=gl_LightSource[0].ambient.rgb*gl_FrontMaterial.ambient.rgb; 
   			vec3 TotalDiffuse=gl_LightSource[0].diffuse.rgb*gl_FrontMaterial.diffuse.rgb*NDotL ; 
   			vec3 TotalSpecular=gl_LightSource[0].specular.rgb*pow(RDotL,specularPower);
  
   			gl_FragColor=vec4(TotalAmbient+TotalDiffuse+TotalSpecular,1.0);  
		}
	</shaderCode>
</fragmentShader>

</Program>